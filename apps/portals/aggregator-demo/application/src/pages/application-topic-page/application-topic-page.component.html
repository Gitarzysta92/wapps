<div class="page-layout">
  <!-- Topic Header -->
  <section class="topic-header-section">
    <div class="topic-header">
      <div class="breadcrumb">
        <a href="#" class="breadcrumb-link">{{ (app$ | async)?.name }}</a>
        <tui-icon icon="@tui.chevron-right" class="breadcrumb-separator"></tui-icon>
        <span class="breadcrumb-current">Discussions</span>
      </div>
      <h1 class="topic-title">How to integrate with external APIs?</h1>
      <div class="topic-meta">
        <div class="topic-author">
          <img src="https://i.pravatar.cc/40?img=1" alt="Sarah Chen" class="author-avatar" width="32" height="32">
          <div class="author-info">
            <span class="author-name">Sarah Chen</span>
            <span class="topic-time">2 hours ago</span>
          </div>
        </div>
        <div class="topic-stats">
          <span class="replies-count">12 replies</span>
          <span class="views-count">156 views</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <div class="content-layout">
    <main class="main-content">
      <!-- Discussion Content -->
      <section class="discussion-content-section">
        <div class="discussion-content">
          <div class="discussion-tags">
            <tui-badge size="s" *ngFor="let tag of ['integration', 'api', 'help']">{{ tag }}</tui-badge>
          </div>
          
          <div class="discussion-body">
            <p>I'm trying to integrate this app with our existing API infrastructure but running into authentication issues. The documentation mentions OAuth 2.0 support, but I'm not sure how to properly configure the client credentials.</p>
            
            <p>Has anyone successfully integrated this with a REST API? I'd love to see some examples or get guidance on the best practices for handling authentication tokens.</p>
            
            <p>My current setup is using Node.js with Express, and I'm getting 401 errors when trying to make authenticated requests. Any help would be greatly appreciated!</p>
          </div>
        </div>
      </section>

      <!-- Related Discussions -->
      <div class="aside-card">
        <h3 class="card-title">Related Discussions</h3>
        <div class="card-content">
          <div class="related-discussion" *ngFor="let discussion of ['API Rate Limiting', 'OAuth Implementation', 'Error Handling Best Practices']">
            <h4 class="related-title">{{ discussion }}</h4>
            <span class="related-stats">5 replies</span>
          </div>
        </div>
      </div>

      <!-- Discussion Actions -->
      <div class="aside-card">
        <h3 class="card-title">Actions</h3>
        <div class="card-content">
          <button tuiButton appearance="secondary" size="s" class="full-width-btn">
            <tui-icon icon="@tui.heart"></tui-icon>
            Follow Discussion
          </button>
          <button tuiButton appearance="secondary" size="s" class="full-width-btn">
            <tui-icon icon="@tui.share"></tui-icon>
            Share
          </button>
          <button tuiButton appearance="secondary" size="s" class="full-width-btn">
            <tui-icon icon="@tui.flag"></tui-icon>
            Report
          </button>
        </div>
      </div>

      <!-- Replies Section -->
      <section class="replies-section">
        <h2 class="section-title">
          <tui-icon icon="@tui.message-circle" class="title-icon"></tui-icon>
          Replies (12)
        </h2>
        
        <div class="replies-list">
          <div class="reply-item">
            <div class="reply-header">
              <img src="https://i.pravatar.cc/40?img=2" alt="Mike Johnson" class="reply-avatar" width="32" height="32">
              <div class="reply-author">
                <span class="author-name">Mike Johnson</span>
                <span class="reply-time">1 hour ago</span>
              </div>
            </div>
            <div class="reply-content">
              <p>I had the same issue! The key is to make sure you're including the Authorization header with "Bearer " prefix. Here's what worked for me:</p>
              <pre><code>const response = await fetch('/api/endpoint', &#123;
  headers: &#123;
    'Authorization': `Bearer $&#123;token&#125;`,
    'Content-Type': 'application/json'
  &#125;
&#125;);</code></pre>
            </div>
          </div>

          <div class="reply-item">
            <div class="reply-header">
              <img src="https://i.pravatar.cc/40?img=3" alt="Emma Wilson" class="reply-avatar" width="32" height="32">
              <div class="reply-author">
                <span class="author-name">Emma Wilson</span>
                <span class="reply-time">45 minutes ago</span>
              </div>
            </div>
            <div class="reply-content">
              <p>Make sure you're also checking the token expiration. I was getting 401s because my tokens were expiring every hour. The API returns a refresh token that you can use to get new access tokens.</p>
            </div>
          </div>
        </div>

        <!-- Reply Form -->
        <div class="reply-form">
          <h3 class="form-title">Add a Reply</h3>
          <div class="form-content">
            <textarea placeholder="Share your thoughts or provide help..." class="reply-textarea"></textarea>
            <div class="form-actions">
              <button tuiButton appearance="secondary" size="s">Cancel</button>
              <button tuiButton appearance="primary" size="s">Post Reply</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>
</div>