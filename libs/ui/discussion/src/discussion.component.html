<div class="discussion-container">
  <div class="discussion-header">
    <div class="topic-info">
      <h4 class="discussion-topic">
        <tui-icon icon="@tui.message-circle" class="topic-icon" />
        {{ data.topic }}
      </h4>
      <div class="topic-meta" *ngIf="data.category || data.tags?.length">
        <tui-chip 
          *ngIf="data.category"
          size="s"
          appearance="primary">
          {{ data.category }}
        </tui-chip>
        <tui-chip 
          *ngFor="let tag of data.tags"
          size="s"
          appearance="neutral">
          #{{ tag }}
        </tui-chip>
      </div>
    </div>
    <div class="discussion-stats" *ngIf="data.isPopular">
      <tui-icon icon="@tui.trending-up" class="trending-icon" />
      <span class="trending-label">Trending</span>
    </div>
  </div>

  <div class="messages-list">
    <div 
      *ngFor="let message of getVisibleMessages()"
      class="message-item">
      <tui-avatar
        size="s"
        class="message-avatar">
        {{ message.author.charAt(0) }}
      </tui-avatar>
      <div class="message-content">
        <div class="message-header">
          <span class="message-author">{{ message.author }}</span>
          <span class="message-timestamp">{{ message.timestamp | date:'short' }}</span>
        </div>
        <p class="message-text">{{ message.message }}</p>
        <div class="message-actions" *ngIf="message.likes">
          <button 
            tuiButton
            size="xs"
            appearance="flat"
            class="like-btn">
            <tui-icon icon="@tui.thumbs-up" />
            {{ message.likes }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="discussion-footer" *ngIf="hasMoreMessages()">
    <button
      tuiButton
      size="s"
      appearance="flat"
      class="view-more-btn">
      <tui-icon icon="@tui.chevrons-down" />
      View {{ getRemainingCount() }} more {{ getRemainingCount() === 1 ? 'message' : 'messages' }}
    </button>
  </div>

  <div class="readonly-overlay" *ngIf="readonly">
    <div class="readonly-message">
      <tui-icon icon="@tui.eye" />
      <span>Read-only discussion preview</span>
    </div>
  </div>
</div>


